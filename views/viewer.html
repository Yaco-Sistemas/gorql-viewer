<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Viewer</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    {{if graph}}
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/d3.js"></script>
    <script type="text/javascript" src="/javascripts/${graph.type}.js"></script>
    <link rel="stylesheet" href="/stylesheets/${graph.type}.css" />
    <script type="text/javascript">
        $(document).ready(function () {
            DV.chart("#dv_viewport",
                [{{each results}}${$value[1]}, {{/each}}],
                { title: "Data viewer" });
        });
    </script>
    {{/if}}
</head>
<body>
    <h1>Data Viewer</h1>
    {{if error}}
    <div id="error">${error}</div>
    {{else}}
    <div id="dv_viewport"></div>
    <table id="dv_table">
    <thead>
        {{each headers}}
        <th>${$value}</th>
        {{/each}}
    </thead>
    <tbody>
        {{each results}}
        <tr>
            {{each $value}}
            <td>${$value}</td>
            {{/each}}
        </tr>
        {{/each}}
    </tbody>
    </table>
    <p id="dv_query">
    ${query}
    </p>
    {{/if}}
</body>
</html>